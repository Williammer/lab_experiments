<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		<title>Lab Armory</title>
		<link rel="shortcut icon" href="../favicon.ico">
        <link rel="stylesheet" type="text/css" href="css/zxx.lib.css">
        <style type="text/css">
        
        </style>
	</head>
	<body>
		<div class="wrapper">
            <form action="processor.php" method="post" id="formData" class="w460 p20 mt20 mb20 auto">
                <div class="fix f14">
                    <label class="l mt5" for="email">邮箱：</label>
                    <div class="cell">
                        <input type="email" id="email" class="p5 pct60" name="email" autofocus required>
                    </div>
                </div>
                <div class="mt20 f14">
                    <label class="l mt5" for="password">密码：</label>
                    <div class="cell">
                        <input type="password" id="password" class="p5 pct60" name="password" required>
                    </div>
                </div>
                <div class="mt15 f14">
                    <label class="l vh">其他：</label>
                    <div class="cell">
                        <input type="checkbox" id="remember" class="vn ml1" name="remember" value="yes"><label class="f12" for="remember">记住我</label>
                        <p class="pt10"><input type="submit" value="登录" class="p5 w100"></p>
                        
                        <div id="result" class="mt30 pt30 dn"></div>
                    </div>
                </div>
            </form>                
        </div>
		
	</body>
</html>

<script>
var eleResult = document.getElementById("result");

if (typeof history.pushState == "function") {
    document.querySelector("#formData").addEventListener("submit", function(event) {

        var myFormData = new FormData(this);
        myFormData.append("token", "xxxxxxxxxxxxxxx");
        var xhr = new XMLHttpRequest();
        xhr.open(this.method, this.action);

        xhr.onload = function(e) {
        // xhr.onreadystatechange = function(e) {
            eleResult.style.display = "block";
            if (xhr.status == 200 && xhr.responseText) {
                eleResult.style.color = "green";
                eleResult.innerHTML = '欢迎你，' + xhr.responseText;
                this.reset();
            } else {
                eleResult.style.color = "#cd0000";
                eleResult.innerHTML = '啊，怎么回事？膝盖居然中了一箭……';
            }
        }.bind(this);// prototype.bind() -IE9+

        xhr.send(myFormData);
        // 阻止默认的表单提交
        event.preventDefault();
    }, false);
} else {
    eleResult.style.display = "block";
    eleResult.style.color = "#cd0000";
    eleResult.innerHTML = '该浏览器被无情地抛弃了！！555555~~~';
}
</script>